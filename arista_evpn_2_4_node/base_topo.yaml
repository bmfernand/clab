name: vxlan

mgmt:
  network: custom_mgmt              # management network name
  ipv4-subnet: 172.20.0.0/24        # ipv4 range

topology:
  kinds:
    arista_ceos:
      image: ceos:4.31.1F
    linux:
      image: ghcr.io/hellt/network-multitool
  nodes:
    # ixp:
    #   kind: bridge
    spine-101:
      kind: arista_ceos
      mgmt-ipv4: 172.20.0.11
      startup-config: ./configs/spine-101.cfg
    spine-102:
      kind: arista_ceos
      mgmt-ipv4: 172.20.0.12
      startup-config: ./configs/spine-102.cfg
    leaf-1101:
      kind: arista_ceos
      mgmt-ipv4: 172.20.0.21
      startup-config: ./configs/leaf-1101.cfg
    leaf-1102:
      kind: arista_ceos
      mgmt-ipv4: 172.20.0.22
      startup-config: ./configs/leaf-1102.cfg
    leaf-1103:
      kind: arista_ceos
      mgmt-ipv4: 172.20.0.23
      startup-config: ./configs/leaf-1103.cfg
    leaf-1104:
      kind: arista_ceos
      mgmt-ipv4: 172.20.0.24
      startup-config: ./configs/leaf-1104.cfg
    h1:
      kind: linux
    h2:
      kind: linux
    h3:
      kind: linux

  links:
    - endpoints: ["leaf-1101:eth7", "spine-101:eth1"]
    - endpoints: ["leaf-1101:eth8", "spine-102:eth1"]
    - endpoints: ["leaf-1102:eth7", "spine-101:eth2"]
    - endpoints: ["leaf-1102:eth8", "spine-102:eth2"]
    - endpoints: ["leaf-1103:eth7", "spine-101:eth3"]
    - endpoints: ["leaf-1103:eth8", "spine-102:eth3"]
    - endpoints: ["leaf-1104:eth7", "spine-101:eth4"]
    - endpoints: ["leaf-1104:eth8", "spine-102:eth4"]
    - endpoints: ["h1:eth1", "leaf-1101:eth1"]
    - endpoints: ["h2:eth1", "leaf-1102:eth1"]
    - endpoints: ["h3:eth1", "leaf-1104:eth1"]

